/*
 * jbSlider
 * http://www.burakkaya.com
 *
 * Created by Burak KAYA 
 * @yesilfasulye
 * 
 * 2013
 */

(function(e){e.fn.jbSlider=function(t){dSettings={animSpeed:1e3,autoPlay:true,autoHide:true,autoHideDelay:1e3,autoHideSpeed:500,controlButtons:false,controlDots:true,controlDotsPos:"center-top",loader:false,nextText:"Next",pauseTime:6e3,pauseOnHover:true,pauseTextShow:false,pauseText:"Pause",prevText:"Prev",thumbView:false,thumbWidth:90};var n=e.extend({},dSettings,t);return this.each(function(){var t=e(this);var r=e(this).find("> *").length;var s=0;if(r<=1){return false}else{t.wrapInner('<div class="jbslider-holder" style="position:relative;"><div class="jbslider-slides">');var o=t.find(".jbslider-holder").outerWidth(t.width()).outerHeight(t.height());var u=t.find(".jbslider-slides");u.find("> *").each(function(){if(e(this).data("active")){s=e(this).prevAll().length-1}});o.append("<nav>");var a=e(this).find("nav");if(n.controlDots){for(i=1;i<=r;i++){a.append('<a href="#">'+i+"</a>")}if(n.autoHide){a.hide();t.hover(function(){a.fadeIn(n.autoHideSpeed)},function(){a.delay(n.autoHideDelay).fadeOut(n.autoHideSpeed)})}switch(n.controlDotsPos){case"left-top":a.css({top:"10px",left:"10px"});break;case"center-top":a.css({top:"10px",left:"50%",marginLeft:-(a.outerWidth()/2)});break;case"right-top":a.css({top:"10px",right:"10px"});break;case"left-bottom":a.css({bottom:"10px",left:"10px"});break;case"center-bottom":a.css({bottom:"10px",left:"50%",marginLeft:-(a.outerWidth()/2)});break;case"right-bottom":a.css({bottom:"10px",right:"10px"});break;default:a.css({top:"10px",left:"50%",marginLeft:-(a.outerWidth()/2)});break}e("a",a).each(function(){e(this).bind("click",function(t){t.preventDefault();e(this).addClass("active").siblings("a").removeAttr("class");var n=e("> .active",u);var r=e("> *:eq("+e(this).prevAll().length+")",u);n.addClass("lastActive");r.css({opacity:0}).addClass("active").animate({opacity:1},500,function(){n.removeClass("active lastActive")})})});if(n.thumbView){e("a",a).each(function(){e(this).hover(function(){var t=u.find("> *:eq("+e(this).prevAll().length+")");var r=null;if(t.attr("src")){r=t.attr("src")}else{r=t.find("img").attr("src")}o.append('<div class="jbslider-thumb" style="width:'+n.thumbWidth+'px;"><img src="'+r+'"/></div>');var i=e(".jbslider-thumb");var s=a.css("marginLeft").replace("px","").replace("-","");var f=a.position().top+a.outerHeight()+5;var l=a.position().left+e(this).position().left-i.width()/2-s;i.css({left:l+"px",top:f+"px"}).fadeIn()},function(){o.find(".jbslider-thumb").remove()})})}}else{a.hide()}var f=function(t){var r=e("> .active",u),i=e("a.active",a);if(r.length==0){r=e("> *:last",u);i=e("a:last",a)}if(t==false){var s=r.prev().length?r.prev():e("> *:last",u);var o=i.prev().length?i.prev():e("a:last",a)}else{var s=r.next().length?r.next():e("> *:first",u);var o=i.next().length?i.next():e("a:first",a)}r.addClass("lastActive");o.addClass("active");i.removeClass("active");s.css({opacity:0}).addClass("active").animate({opacity:1},n.animSpeed,function(){r.removeClass("active lastActive").animate({opacity:0},n.animSpeed)})};var l=function(){o.find(".jbslider-loader").animate({width:"100%"},n.pauseTime,function(){e(this).css({width:"0"})})};if(n.autoPlay){if(n.loader){o.append('<div class="jbslider-loader">');l()}var c=setInterval(function(){f(true);l()},n.pauseTime);if(n.pauseOnHover){if(n.pauseTextShow){o.append('<span class="jbslider-pause">'+n.pauseText+"</span>");var h=o.find(".jbslider-pause");o.hover(function(){h.fadeIn(n.autoHideSpeed)},function(){h.fadeOut(n.autoHideSpeed)})}o.hover(function(){clearInterval(c);if(n.loader){o.find(".jbslider-loader").stop().css({width:"0"})}},function(){clearInterval(c);l();c=setInterval(function(){f(true);l()},n.pauseTime)})}}if(n.controlButtons){o.append('<a href="#" data-direction="prev" class="jbslider-arrow">'+n.prevText+'</a><a href="#" data-direction="next" class="jbslider-arrow">'+n.nextText+"</a>");var p=o.find(".jbslider-arrow");p.each(function(){e(this).css({top:"50%",marginTop:-(e(this).outerHeight()/2)});if(e(this).data("direction")=="prev"){e(this).css({left:"0"});e(this).bind("click",function(e){e.preventDefault();f(false)})}else{e(this).css({right:"0"});e(this).bind("click",function(e){e.preventDefault();f(true)})}});if(n.autoHide){p.hide();o.hover(function(){p.fadeIn(n.autoHideSpeed)},function(){p.delay(n.autoHideDelay).fadeOut(n.autoHideSpeed)})}}var d=function(){u.find("> *:eq("+s+")").addClass("active").siblings("*").removeClass("active");if(a){a.find("a:eq("+s+")").addClass("active").siblings("a").removeClass("active")}};d()}})}})(jQuery)
